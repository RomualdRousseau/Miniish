module edge_detector_with_delay #(
    RISE = 1 : RISE == 0 || RISE == 1,
    FALL = 1 : FALL == 0 || FALL == 1,
    DELAY = 1 : DELAY > 0
  )(
    input clk,
    input in,
    output out
  ) {
  
  .clk(clk) {
    edge_detector this_edge_detector(#RISE(RISE), #FALL(FALL));
    pipeline this_delay(#DEPTH(DELAY));
  }

  always {
    this_edge_detector.in = in;
    this_delay.in = this_edge_detector.out;
    out = this_delay.out;
  }
}
